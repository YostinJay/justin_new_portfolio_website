!function(e,n){"object"==typeof module&&module.exports?module.exports.Inviewr=n():(e.Inviewr=n(),e.Inviewr.init())}("undefined"!=typeof window?window:this,function(){"use strict";var i={selectors:[],elements:[],observer:null,mode:"",register:function(e,n){i.selectors.push({selector:e,options:n}),i.refresh()},fetch:function(){i.selectors.forEach(function(n){document.querySelectorAll(n.selector).forEach(function(e){e.evolvethemes_inviewr_options||(e.evolvethemes_inviewr_options=JSON.stringify(n.options),"compat"!==i.mode?i.observer.observe(e):i.elements.push(e))})})},check:function(){i.elements.forEach(function(e,n,t){var o=JSON.parse(e.evolvethemes_inviewr_options);e.getBoundingClientRect().top<=window.innerHeight&&0<=e.getBoundingClientRect().bottom&&"none"!==getComputedStyle(e).display?(i.inview(e,o),o.toggle||t.splice(n,1)):i.notInview(e,o)}),0===i.elements.length&&i.unbind()},refresh:function(){i.fetch(),"compat"===i.mode&&(i.bind(),i.check())},bind:function(){0!==i.elements.length&&(document.addEventListener("scroll",i.check),window.addEventListener("resize",i.check),window.addEventListener("orientationchange",i.check))},unbind:function(){document.removeEventListener("scroll",i.check),window.removeEventListener("resize",i.check),window.removeEventListener("orientationchange",i.check)},customEventPolyfill:function(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)},emit:function(e,n){var t=new CustomEvent(n);e.dispatchEvent(t)},inview:function(e){e.classList.add("evolvethemes-inviewr"),i.emit(e,"evolvethemes-inview")},notInview:function(e,n){n.toggle&&e.classList.remove("evolvethemes-inviewr"),i.emit(e,"evolvethemes-not-inview")},init:function(){i.customEventPolyfill(),"IntersectionObserver"in window?i.observer=new IntersectionObserver(function(e){e.forEach(function(e){var n=JSON.parse(e.target.evolvethemes_inviewr_options);0<e.intersectionRatio?(i.inview(e.target,n),n.toggle||i.observer.unobserve(e.target)):i.notInview(e.target,n)})}):i.mode="compat",document.addEventListener("DOMContentLoaded",i.refresh)}};return i});